<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Automation Rhapsody" href="https://automationrhapsody.com/rss.xml"><meta name="generator" content="Astro v5.5.3"><script src="/scripts.js"></script><!-- Font preloads --><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Playball"><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://automationrhapsody.com/testing-with-cypress-build-a-react-application-with-node-js-backend/"><!-- Primary Meta Tags --><title>Testing with Cypress - Build a React application with Node.js backend</title><meta name="title" content="Testing with Cypress - Build a React application with Node.js backend"><meta name="description" content="Short introduction to the application under test that is created for and used in all Cypress examples. It is React frontend created with Create React App package. Backend is a Node.js application running on Express."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://automationrhapsody.com/testing-with-cypress-build-a-react-application-with-node-js-backend/"><meta property="og:title" content="Testing with Cypress - Build a React application with Node.js backend"><meta property="og:description" content="Short introduction to the application under test that is created for and used in all Cypress examples. It is React frontend created with Create React App package. Backend is a Node.js application running on Express."><meta property="og:image" content="https://automationrhapsody.com/blog-placeholder.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://automationrhapsody.com/testing-with-cypress-build-a-react-application-with-node-js-backend/"><meta property="twitter:title" content="Testing with Cypress - Build a React application with Node.js backend"><meta property="twitter:description" content="Short introduction to the application under test that is created for and used in all Cypress examples. It is React frontend created with Create React App package. Backend is a Node.js application running on Express."><meta property="twitter:image" content="https://automationrhapsody.com/blog-placeholder.jpg"><style>:root{--color-gray-bg: #f5f5f5;--color-gray-text: #5e5e5e}body{font-family:Roboto,sans-serif;background:var(--color-gray-bg);word-wrap:break-word;overflow-wrap:break-word;color:var(--color-gray-text);font-size:18px}main{width:960px;max-width:calc(100% - 2em);margin:auto}h2{color:#3879d9;font-size:20px;margin:25px 0 6px}p{margin:6px 0}img{max-width:100%}pre{margin:0;padding:12px}@media (max-width: 720px){body{font-size:16px}ul{padding-inline-start:16px}}.tab{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab button{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab button:hover{background-color:#ddd}.tab button.active{background-color:#ccc}.tabcontent{display:none;border-top:none}footer[data-astro-cid-sz7xmlte]{margin:24px 0;text-align:center}header[data-astro-cid-3ef6ksr2]{text-align:center;font-size:56px}header[data-astro-cid-3ef6ksr2] div[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{font-family:Playball,Arial;color:#000;text-decoration:none;text-shadow:0 .033em 0 #fff;border-bottom:none}
article[data-astro-cid-bvzihdzo]{padding:24px;box-shadow:0 2px 3px #acabab;background:#fff;position:relative}.post-title[data-astro-cid-bvzihdzo]{font-family:Bitter,serif;font-weight:700!important;margin:0;padding:5px 0;font-size:32px;line-height:40px;color:#444}.tags[data-astro-cid-bvzihdzo]{display:flex;flex-wrap:wrap}.tags[data-astro-cid-bvzihdzo]>a[data-astro-cid-bvzihdzo]{margin-left:8px}@media (max-width: 720px){article[data-astro-cid-bvzihdzo]{padding:12px}}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Automation Rhapsody</a> </div> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <h1 class="post-title" data-astro-cid-bvzihdzo>Testing with Cypress - Build a React application with Node.js backend</h1> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2019-06-28T00:00:00.000Z"> Jun 28, 2019 </time> </div> <hr data-astro-cid-bvzihdzo> </div>  <p>This post is part of a Cypress series, you can see all post from the series in <a href="/testing-with-cypress-lessons-learned-in-a-complete-framework/">Testing with Cypress - lessons learned in a complete framework</a>. Examples code is located <span>in </span><a href="https://github.com/llatinov/cypress-testing-framework" target="_blank" rel="noopener noreferrer">cypress-testing-framework</a><span> GitHub repository.</span></p>
<h2>Backend</h2>
The backend is a simple Node.js application build with Express web server. It supports several APIs that can save a person, get a person by id, get all persons or delete the last person in the collection. You can read the full description in <a href="/build-rest-api-express-node-js-run-docker/">Build a REST API with Express on Node.js and run it on Docker</a> post.
<h2>Frontend</h2>
Current post is mainly devoted to the frontend. It described how the React application is built. In order to make this part easy, <a href="https://create-react-app.dev/docs/getting-started/" target="_blank" rel="noopener noreferrer">Create React App</a> is used. The best thing about it is that you do not need to handle lots of configurations and you just focus on your application. In order to create an application, Create React App has to be installed as a global NPM package with <em><strong>npm install -g create-react-app</strong></em>. The application itself is created with <em><strong>create-react-app my-application-name</strong></em>. Once this is done you can start building your application. See more details on application creation in <a href="https://www.andreasreiterer.at/creating-react-app-create-react-app/" target="_blank" rel="noopener noreferrer">How to Create a React App with create-react-app</a>. I have added <em><strong>Bootstrap</strong></em> for better styles and <em><strong>Toastr</strong></em> for nicer notifications. I also use <em><strong>Axios</strong></em> for API calls. I am not going into details about how to work with React as this is a pretty huge topic and I am not really expert at it. You can inspect the GitHub repository given above of how controllers are structured.
<h2>Instrumented for code coverage</h2>
After having the application ready I wanted to add support for code coverage. The tool used to measure code coverage is <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">Istanbul</a>. Because of Create React App, adding the configuration is not straight-forward as practically there is no <em><strong>webpack.config.js</strong></em> file, it is hidden.
<p>One option is to eject the application. Maybe for a big project where you need full control over the configurations, this is OK, but for this small application, I would not want to deal with it.</p>
<p>Another option is to use a package that builds on top of Create React App. One such plugin is <em><strong>react-app-rewired</strong></em>. It is installed along with <em><strong>istanbul-instrumenter-loader</strong></em>, the actual code coverage plugin. Once those two are installed the actual configuration is pretty simple. A file named <em><strong>config-overrides.js</strong></em> is created with the following content:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>const path = require('path');</span></span>
<span class="line"><span>const fs = require('fs');</span></span>
<span class="line"><span></span></span>
<span class="line"><span>module.exports = function override(config, env) {</span></span>
<span class="line"><span>  // do stuff with the webpack config...</span></span>
<span class="line"><span>  config.module.rules.push({</span></span>
<span class="line"><span>    test: /\.js$|\.jsx$/,</span></span>
<span class="line"><span>    enforce: 'post',</span></span>
<span class="line"><span>    use: {</span></span>
<span class="line"><span>      loader: 'istanbul-instrumenter-loader',</span></span>
<span class="line"><span>      options: {</span></span>
<span class="line"><span>        esModules: true</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    include: path.resolve(fs.realpathSync(process.cwd()), 'src')</span></span>
<span class="line"><span>  });</span></span>
<span class="line"><span>  return config;</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span></code></pre>
<p>Also, <em><strong>package.json</strong></em> has to be changed. The default <em><strong>react-<span class="x x-first x-last">scripts</span></strong></em><span><em><strong> start/build/test</strong></em> is changed to <em><strong>react-<span class="x x-first x-last">app-rewired</span> start/build/test</strong></em>. In order to verify that code coverage is enabled, go to Dev Tools (hit keyboard F12), then go to Console and search for <em><strong><strong>coverage</strong></strong></em> variable.</span></p>
<h2>Dockerization</h2>
In order to make it easy to run a <em><strong>Dockerfile</strong></em> has been added. It installs <em><strong>Yarn</strong></em> as a package manager, then copies <em><strong>package.json</strong></em>. Important is to copy <em><strong>yarn.lock</strong></em> as well since the actual dependencies are in it. If this is not copied, every time an install is run it will pick the latest dependencies, which may lead to instability. Then the installation of dependencies is done with command <em><strong>yarn</strong></em>, short for <em><strong>yarn install</strong></em>. Finally, all local files are copied. This is done in the end so installation is not triggered on every file change, but only on <em><strong>package.json</strong></em> or <em><strong>yarn.lock</strong></em> change.
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>FROM node:8.16.0-alpine</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ENV APP /app</span></span>
<span class="line"><span>WORKDIR $APP</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RUN npm install yarn -g</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COPY package.json $APP</span></span>
<span class="line"><span>COPY yarn.lock $APP</span></span>
<span class="line"><span>RUN yarn</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COPY . .</span></span>
<span class="line"><span></span></span></code></pre>
<p>The <em><strong>docker-compose.yml</strong></em> file is also very simple. It has two services. The first is the backend which is exposed to <em><strong>9000</strong></em> port of the host. This is needed because Cypress tests directly access the APIs. It uses the image uploaded to the Docker hub repository: <em><strong>image: llatinov/nodejs-rest-stub</strong></em>. The second service is the frontend. It uses local Dockerfile: <em><strong>build: .</strong></em>. When frontend container is started <em><strong>yarn start</strong></em> command is executed and is exposed to port <em><strong>3030</strong></em> of the host machine. One more thing, that is added as configuration, is the backend API URL that can be controlled by setting <em><strong>API_URL</strong></em> environment variable, which then is set to <em><strong>REACT_APP_API_URL</strong></em>, used by the frontend. If no <em><strong>API_URL</strong></em> is provided then the default of <em><strong><a href="http://localhost:9000">http://localhost:9000</a></strong></em> is taken.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>version: '3'</span></span>
<span class="line"><span></span></span>
<span class="line"><span>services:</span></span>
<span class="line"><span>  backend:</span></span>
<span class="line"><span>    image: llatinov/nodejs-rest-stub</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - '9000:3000'</span></span>
<span class="line"><span>  frontend:</span></span>
<span class="line"><span>    build: .</span></span>
<span class="line"><span>    command: yarn start</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      - REACT_APP_API_URL=${API_URL:-http://localhost:9000}</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - '3030:3000'</span></span>
<span class="line"><span></span></span></code></pre>
<h2>Run the application</h2>
There are several ways to run the application under test in order to try Cypress examples. One way is to download both repositories of the backend and the frontend and run them separately.
<p>Second is to run the backend with Docker command <em><strong>docker run -p 9000:3000 llatinov/nodejs-rest-stub</strong></em>. The command maps the <em><strong>3000</strong></em> port of the container to <em><strong>9000</strong></em> port of the host, this is where the APIs are available. I have uploaded the backend image to the public Docker hub repository. After backend is running, the frontend is run with <em><strong>yarn start</strong></em> command. In this case, frontend is running on port 3000, so you have to adjust the proper URL in the Cypress configurations.</p>
<p>The third option is to run with docker-compose with <em><strong>docker-compose up</strong></em> command. This runs the backend on port <em><strong>9000</strong></em> and the frontend on port <em><strong>3030</strong></em>.</p>
<h2>Functionality</h2>
The application is very simple, it has few pages where user can add a person or see already existing persons in the backend. On each successful action, there is a notification, in case of a network error, a message is shown.
<div class="tab"><button id="8132-Persons list" class="tablinks active" onclick="openTab(this, &#x27;content-8132-Persons list&#x27;, &#x27;8132&#x27;)">Persons list</button>
<button id="8132-Add person" class="tablinks" onclick="openTab(this, &#x27;content-8132-Add person&#x27;, &#x27;8132&#x27;)">Add person</button>
<button id="8132-Version page" class="tablinks" onclick="openTab(this, &#x27;content-8132-Version page&#x27;, &#x27;8132&#x27;)">Version page</button></div>
<div id="content-8132-Persons list" class="tabcontent" style="display: block">
<img src="/images/2019/06/Cypress-SUT-persons.png">
</div>
<div id="content-8132-Add person" class="tabcontent">
<img src="/images/2019/06/Cypress-SUT-add.png">
</div>
<div id="content-8132-Version page" class="tabcontent">
<img src="/images/2019/06/Cypress-SUT-about.png">
</div>
<h2>Conclusion</h2>
In order to demonstrate the Cypress examples, a separate React application with a backend is created with Create React App package. It is also configured to support code coverage with Istanbul.  <hr data-astro-cid-bvzihdzo>  <h2 data-astro-cid-bvzihdzo>Related Posts</h2> <ul data-astro-cid-bvzihdzo> <li data-astro-cid-bvzihdzo> <a href="/build-rest-api-express-node-js-run-docker/" data-astro-cid-bvzihdzo>Build a REST API with Express on Node.js and run it on Docker</a> </li><li data-astro-cid-bvzihdzo> <a href="/testing-with-cypress-lessons-learned-in-a-complete-framework/" data-astro-cid-bvzihdzo>Testing with Cypress - lessons learned in a complete framework</a> </li> </ul>  <div class="tags" data-astro-cid-bvzihdzo> <div data-astro-cid-bvzihdzo>Tags:</div> <a href="/tags/code-coverage" data-astro-cid-bvzihdzo>Code coverage</a><a href="/tags/cypress" data-astro-cid-bvzihdzo>Cypress</a><a href="/tags/docker" data-astro-cid-bvzihdzo>Docker</a><a href="/tags/javascript" data-astro-cid-bvzihdzo>JavaScript</a><a href="/tags/nodejs" data-astro-cid-bvzihdzo>Node.js</a><a href="/tags/react" data-astro-cid-bvzihdzo>React</a><a href="/tags/tutorials" data-astro-cid-bvzihdzo>Tutorials</a> </div> </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 - Automation Rhapsody. All rights reserved.
</footer>  </body></html>