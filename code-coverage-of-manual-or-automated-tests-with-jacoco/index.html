<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Automation Rhapsody" href="https://automationrhapsody.com/rss.xml"><meta name="generator" content="Astro v5.5.3"><script src="/scripts.js"></script><!-- Font preloads --><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Playball"><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://automationrhapsody.com/code-coverage-of-manual-or-automated-tests-with-jacoco/"><!-- Primary Meta Tags --><title>Code coverage of manual or automated tests with JaCoCo</title><meta name="title" content="Code coverage of manual or automated tests with JaCoCo"><meta name="description" content="Tutorial how to do code coverage on automated or even manual functional tests with JaCoCo."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://automationrhapsody.com/code-coverage-of-manual-or-automated-tests-with-jacoco/"><meta property="og:title" content="Code coverage of manual or automated tests with JaCoCo"><meta property="og:description" content="Tutorial how to do code coverage on automated or even manual functional tests with JaCoCo."><meta property="og:image" content="https://automationrhapsody.com/blog-placeholder.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://automationrhapsody.com/code-coverage-of-manual-or-automated-tests-with-jacoco/"><meta property="twitter:title" content="Code coverage of manual or automated tests with JaCoCo"><meta property="twitter:description" content="Tutorial how to do code coverage on automated or even manual functional tests with JaCoCo."><meta property="twitter:image" content="https://automationrhapsody.com/blog-placeholder.jpg"><style>:root{--color-gray-bg: #f5f5f5;--color-gray-text: #5e5e5e}body{font-family:Roboto,sans-serif;background:var(--color-gray-bg);word-wrap:break-word;overflow-wrap:break-word;color:var(--color-gray-text);font-size:18px}main{width:960px;max-width:100%;margin:auto}h2{color:#3879d9;font-size:20px;margin:25px 0 6px}p{margin:6px 0}img{max-width:100%}pre{margin:0;padding:12px}.card{padding:16px;margin:10px;box-shadow:0 2px 3px #acabab;background:#fff;border-radius:24px;color:inherit}@media (max-width: 720px){body{font-size:16px}ul{padding-inline-start:16px}}.tab{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab button{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab button:hover{background-color:#ddd}.tab button.active{background-color:#ccc}.tabcontent{display:none;border-top:none}footer[data-astro-cid-sz7xmlte]{margin:24px 0;text-align:center}header[data-astro-cid-3ef6ksr2]{text-align:center;font-size:56px}header[data-astro-cid-3ef6ksr2] div[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{font-family:Playball,Arial;color:#000;text-decoration:none;text-shadow:0 .033em 0 #fff;border-bottom:none}
.post-title[data-astro-cid-bvzihdzo]{font-family:Bitter,serif;font-weight:700!important;margin:0;padding:5px 0;font-size:32px;line-height:40px;color:#444}.tags[data-astro-cid-bvzihdzo]{display:flex;flex-wrap:wrap}.tags[data-astro-cid-bvzihdzo]>a[data-astro-cid-bvzihdzo]{margin-left:8px}@media (max-width: 720px){article[data-astro-cid-bvzihdzo]{padding:12px}}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Automation Rhapsody</a> </div> </header>  <main data-astro-cid-bvzihdzo> <article class="card" data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <h1 class="post-title" data-astro-cid-bvzihdzo>Code coverage of manual or automated tests with JaCoCo</h1> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2015-08-14T00:00:00.000Z"> Aug 14, 2015 </time> </div> <hr data-astro-cid-bvzihdzo> </div>  <p>Code coverage is a way to check what part of the code your tests are exercising. <a href="https://www.eclemma.org/jacoco/" target="_blank" rel="noopener">JaCoCo</a> is a free code coverage library for Java.</p>
<h2>Code coverage</h2>
There are two main streamlines in code coverage. One is running code coverage on each build measuring unit tests coverage. Once configured this needs no manual intervention. Depending on the tools there is even an option to fail the build if code coverage doesn't reach the desired threshold. This is well described in <a href="/automated-code-coverage-of-unit-tests-with-jacoco-and-maven/">Automated code coverage of unit tests with Maven and JaCoCo</a> post. Another aspect is running code coverage on automated or even manual functional tests scenarios. This post is dedicated to latter. I have already created <a href="/what-about-code-coverage/">What about code coverage</a> post to the theory of this type of code coverage. Current post is about getting it done in practice.
<h2>The idea</h2>
The idea is pretty simple. The application is started with a code coverage tool is attached to it, then tests are executed and results are gathered. This is it. Having stated it that way it doesn't sound that bizarre to run code coverage on manual tests. Running it makes sense if only tests are well documented and repeatable scenarios that are usually run on regression testing.
<h2>JaCoCo Java agent</h2>
Java agent is powerful mechanism providing the ability to instrument and change classes at runtime. Java agent library is passed as a JVM parameter when running given application with <em><strong>-javaagent:{path_to_jar}</strong></em>. JaCoCo tool is implemented as Java agent. More details for Java agents can be found at <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/instrument/package-summary.html">java.lang.instrument package</a>.
<p>In case application under test does not support plugin agents to JVM then coverage can be measured with offline instrumentation described in <a href="/code-coverage-with-jacoco-offline-instrumentation-with-maven/">Code coverage with JaCoCo offline instrumentation with Maven</a> post.</p>
<h2>Restrictions</h2>
Some restrictions that have to be taken into consideration:
<ul>
 	<li>JaCoCo plugin is only for Eclipse IDE, hence it should be used in order to get the report</li>
 	<li><a href="https://www.eclemma.org/userdoc/importexport.html" target="_blank" rel="noopener">Imported execution data must be based on the exact same class files that are also used within the Eclipse IDE</a>, hence application should be run in Eclipse, it is not possible to build it and run it separately as class files will differ</li>
 	<li>Eclipse is not capable of shutting down the JVM, it directly kills it, hence the only way to get results is to start JaCoCo agent in <em><strong>tcpserver</strong></em> output mode</li>
 	<li>JaCoCo agent version 0.7.4 and Eclipse EclEmma plugin 2.3.2 are used, those are compatible, 0.7.5 introduces change in data format</li>
</ul>
<h2>Install Eclipse plugin</h2>
Having stated the restriction it is time to start. Installation is done through <em><strong>Eclipse -> Help -> Eclipse Marketplace... -> search for "jacoco" -> Install -> restart Eclipse</strong></em>.
<p><a href="/images/2015/08/JaCoCo-install.png"><img src="/images/2015/08/JaCoCo-install.png" alt="JaCoCo-install"></a></p>
<h2>Run the application</h2>
As stated in restrictions in order code coverage to work application should be started in <em><strong>Eclipse</strong></em>. I will use sample application I have introduced in <a href="/rest-performance-problems-with-dropwizard-and-jersey-jaxb-provider/" target="_blank" rel="noopener">Build a RESTful stub server with Dropwizard</a> post. It can be found in GitHub <a title="sample-dropwizard-rest-stub" href="https://github.com/llatinov/sample-dropwizard-rest-stub" target="_blank" rel="noopener">sample-dropwizard-rest-stub</a> repository. For this tutorial, it is checked out to: <em><strong>C:\sample-dropwizard-rest-stub</strong></em>.
<p>Download JaCoCo 0.7.4 agent jar. For this tutorial it is saved to <em><strong>C:\JaCoCo</strong></em></p>
<p>Project have to imported to Eclipse from <em><strong>File -> Import -> Existing Maven projects. Once imported Run configuration have to be done from Run -> Run Configurations… -> double click Java Application</strong></em>. This opens new window to define configuration. Properties are stated below:</p>
<ul>
 	<li>Name (Main tab): <em><strong>RestStubApp</strong></em> (could be whatever name)</li>
 	<li>Project (Main tab): <em><strong>sample-dropwizard-rest-stub</strong></em></li>
 	<li>Main class (Main tab): <em><strong>com.automationrhapsody.reststub.RestStubApp</strong></em></li>
 	<li>Program arguments (Arguments tab): <em><strong>server config.yml</strong></em></li>
 	<li>VM arguments (Arguments tab): <em><strong>-javaagent:C:\JaCoCo\jacocoagent.jar=output=tcpserver</strong></em> (started in "tcpserver" output mode)</li>
 	<li>Working directory -> Other (Arguments tab): <em><strong>C:\sample-dropwizard-rest-stub</strong></em></li>
</ul>
<a href="/images/2015/08/JaCoCo-run.png"><img src="/images/2015/08/JaCoCo-run.png" alt="JaCoCo-run"></a>
<p>Once the configuration is created then run it.</p>
<p>Apart from the given sample application, it should be possible to run every application in Eclipse. This assumption is made on the fact that developers do need to debug their application, so they will have a way to run it. The important part is to include -javaagent: part in VM arguments section</p>
<h2>Test</h2>
Now when we have the application running is time to run all tests we have both automation and manual. For manual, it is important to be documented scenario which is reproducible in each regression testing, not just some random clicking. The idea is that we want to measure what coverage our tests do.
<h2>Import coverage results</h2>
After all tests have passed it is time to import the results into <em><strong>Eclipse</strong></em>. This is done from <em><strong>File -> Import -> Coverage Session -> select Agent address radio button but leave defaults -> enter some name and select code under test</strong></em>.
<p><a href="/images/2015/08/JaCoCo-import.png"><img src="/images/2015/08/JaCoCo-import.png" alt="JaCoCo-import"></a></p>
<p>Once imported results can be seen and code gets highlighted.</p>
<p><a href="/images/2015/08/JaCoCo-results.png"><img src="/images/2015/08/JaCoCo-results.png" alt="JaCoCo-results"></a></p>
<h2>Export to HTML</h2>
Now result can be exported. There are several options: <em><strong>HTML</strong></em>, <em><strong>zipped HTML</strong></em>, <em><strong>XML</strong></em>, <em><strong>CSV</strong></em> or <em><strong>JaCoCo execution data file</strong></em>. Export is done from: <em><strong>File -> Export -> Coverage Report -> select session and location</strong></em>.
<p><a href="/images/2015/08/JaCoCo-export.png"><img src="/images/2015/08/JaCoCo-export.png" alt="JaCoCo-export"></a></p>
<h2>Analyse</h2>
Here comes the hard part. The code could be quite complex and not that easy to understand. In the current tutorial, code is pretty simple. Inspecting <a href="/examples/JaCoCo-results/index.html" target="_blank" rel="noopener">HTML JaCoCo report</a> it can be easily noticed that <a href="/examples/JaCoCo-results/sample-dropwizard-rest-stub/src_main_java/com.automationrhapsody.reststub.resources/PersonService.java.html" target="_blank" rel="noopener">addPerson()</a> method has not been called. This leads to a conclusion that one test has been missed - to invoke all persons endpoint. Another finding is that <a href="/examples/JaCoCo-results/sample-dropwizard-rest-stub/src_main_java/com.automationrhapsody.reststub.resources/ProductsServlet.java.html" target="_blank" rel="noopener">ProductServlet</a> hasn't been tested with empty product id.
<h2>Conclusion</h2>
It is pretty easy to measure the code coverage. Whether to do it is another discussion held in <a href="/what-about-code-coverage/" target="_blank" rel="noopener">What about code coverage</a> post. If there is a time it might be beneficial. But do not make code coverage an important KPI as this could lead to aimless test with only one purpose - higher percentage. Code coverage should be done in order to optimize tests and search for gaps.  <hr data-astro-cid-bvzihdzo>  <h2 data-astro-cid-bvzihdzo>Related Posts</h2> <ul data-astro-cid-bvzihdzo> <li data-astro-cid-bvzihdzo> <a href="/what-about-code-coverage/" data-astro-cid-bvzihdzo>What about code coverage</a> </li><li data-astro-cid-bvzihdzo> <a href="/automated-code-coverage-of-unit-tests-with-jacoco-and-maven/" data-astro-cid-bvzihdzo>Automated code coverage of unit tests with JaCoCo and Maven</a> </li><li data-astro-cid-bvzihdzo> <a href="/code-coverage-with-jacoco-offline-instrumentation-with-maven/" data-astro-cid-bvzihdzo>Code coverage with JaCoCo offline instrumentation with Maven</a> </li><li data-astro-cid-bvzihdzo> <a href="/build-a-rest-stub-server-with-dropwizard/" data-astro-cid-bvzihdzo>Build a RESTful stub server with Dropwizard</a> </li> </ul>  <div class="tags" data-astro-cid-bvzihdzo> <div data-astro-cid-bvzihdzo>Tags:</div> <a href="/tags/code-coverage" data-astro-cid-bvzihdzo>Code coverage</a><a href="/tags/jacoco" data-astro-cid-bvzihdzo>JaCoCo</a><a href="/tags/java" data-astro-cid-bvzihdzo>Java</a><a href="/tags/non-functional" data-astro-cid-bvzihdzo>Non-functional</a><a href="/tags/tutorials" data-astro-cid-bvzihdzo>Tutorials</a> </div> </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 - Automation Rhapsody. All rights reserved.
</footer>  </body></html>