<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Automation Rhapsody" href="https://automationrhapsody.com/rss.xml"><meta name="generator" content="Astro v5.5.3"><script src="/scripts.js"></script><!-- Font preloads --><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Playball"><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://automationrhapsody.com/powermock-examples-better-not-use/"><!-- Primary Meta Tags --><title>PowerMock examples and why better not to use them</title><meta name="title" content="PowerMock examples and why better not to use them"><meta name="description" content="In this post, I have summarised all PowerMock examples I've given so far. More important I will try to give some justification why I think necessity to use PowerMock is considered an indicator for a bad code design."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://automationrhapsody.com/powermock-examples-better-not-use/"><meta property="og:title" content="PowerMock examples and why better not to use them"><meta property="og:description" content="In this post, I have summarised all PowerMock examples I've given so far. More important I will try to give some justification why I think necessity to use PowerMock is considered an indicator for a bad code design."><meta property="og:image" content="https://automationrhapsody.com/blog-placeholder.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://automationrhapsody.com/powermock-examples-better-not-use/"><meta property="twitter:title" content="PowerMock examples and why better not to use them"><meta property="twitter:description" content="In this post, I have summarised all PowerMock examples I've given so far. More important I will try to give some justification why I think necessity to use PowerMock is considered an indicator for a bad code design."><meta property="twitter:image" content="https://automationrhapsody.com/blog-placeholder.jpg"><style>:root{--color-gray-bg: #f5f5f5;--color-gray-text: #5e5e5e}body{font-family:Roboto,sans-serif;background:var(--color-gray-bg);word-wrap:break-word;overflow-wrap:break-word;color:var(--color-gray-text);font-size:18px}main{width:960px;max-width:calc(100% - 2em);margin:auto}h2{color:#3879d9;font-size:20px;margin:25px 0 6px}p{margin:6px 0}img{max-width:100%}pre{margin:0;padding:12px}@media (max-width: 720px){body{font-size:16px}ul{padding-inline-start:16px}}.tab{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab button{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab button:hover{background-color:#ddd}.tab button.active{background-color:#ccc}.tabcontent{display:none;border-top:none}footer[data-astro-cid-sz7xmlte]{margin:24px 0;text-align:center}header[data-astro-cid-3ef6ksr2]{text-align:center;font-size:56px}header[data-astro-cid-3ef6ksr2] div[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{font-family:Playball,Arial;color:#000;text-decoration:none;text-shadow:0 .033em 0 #fff;border-bottom:none}
article[data-astro-cid-bvzihdzo]{padding:24px;box-shadow:0 2px 3px #acabab;background:#fff;position:relative}.post-title[data-astro-cid-bvzihdzo]{font-family:Bitter,serif;font-weight:700!important;margin:0;padding:5px 0;font-size:32px;line-height:40px;color:#444}.tags[data-astro-cid-bvzihdzo]{display:flex;flex-wrap:wrap}.tags[data-astro-cid-bvzihdzo]>a[data-astro-cid-bvzihdzo]{margin-left:8px}@media (max-width: 720px){article[data-astro-cid-bvzihdzo]{padding:12px}}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Automation Rhapsody</a> </div> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <h1 class="post-title" data-astro-cid-bvzihdzo>PowerMock examples and why better not to use them</h1> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2017-06-01T00:00:00.000Z"> Jun 1, 2017 </time> </div> <hr data-astro-cid-bvzihdzo> </div>  <p>All code examples are available in GitHub <a href="https://github.com/llatinov/java-samples" target="_blank" rel="noopener noreferrer">java-samples/junit</a> repository.</p>
<h2>PowerMock</h2>
<a href="http://powermock.github.io/" target="_blank" rel="noopener noreferrer">PowerMock</a> is a framework that extends other mock libraries giving them more powerful capabilities. PowerMock uses a custom classloader and bytecode manipulation to enable mocking of static methods, constructors, final classes and methods, private methods, removal of static initializers and more.
<h2>PowerMock series</h2>
So far in my blog, I have written a lot for PowerMock. Even more than I have written for Mockito which actually deserves better attention. Post from PowerMock series are:
<ul>
 	<li><a href="/mock-static-methods-junit-powermock-example/">Mock static methods in JUnit with PowerMock example</a></li>
 	<li><a href="/verify-static-method-called-powermock/">Verify static method was called with PowerMock</a></li>
 	<li><a href="/call-private-method-powermock/">Call private method with PowerMock</a></li>
 	<li><a href="/mock-private-method-call-powermock/">Mock private method call with PowerMock</a></li>
 	<li><a href="/mock-new-object-creation-powermock/">Mock new object creation with PowerMock</a></li>
</ul>
<h2>Why avoid PowerMock</h2>
I have worked on a project where PowerMock was not needed at all. We had 91.6% code coverage only with Mockito. Initially, it was 85% but when we utilized PITest we increased the code coverage. See more on PITest in <a href="/mutation-testing-java-pitest/">Mutation testing for Java with PITest</a> post. I also have worked on an old product where without PowerMock you cannot do decent unit testing. PowerMock was a must in order to achieve our goal of 80% code coverage. I can easily compare those two projects. The old one had large classes with lots of private methods and used lots of static methods. It was really hard to maintain that code. In this post, I'm not going to talk about SOLID because I do not consider myself a total expert on the subject. There are lots of discussions over the internet about pros and cons of static methods so everyone can decide personally. For me, I've come to a conclusion that necessity of using PowerMock in a project is an indicator for bad code design. In later projects, PowerMock is not used at all. If something cannot be unit tested with Mockito then the class is refactored.
<h2>How to avoid PowerMock</h2>
PowerMock features described here are related to static methods, public methods and creating new objects.
<h3>Mock or verify static methods</h3>
I'm not saying don't use static methods, but they should be deterministic and not very complex. Not being able to verify static method was called is a little pain but most important is input and output of your method under test, what internal call it is doing is not that important.
<h3>Mock or call private methods</h3>
Private methods are not supposed to be tested at all. It is like they do not exist. If a class is complex enough so you have to call private methods or to test individually private methods then this class might be good to be split up.
<h3>Mock new object creation</h3>
Instead of creating the object in the class use dependency injection to provide it to the class from outside either via a constructor or via a setter. This was you can very easily test this class by injecting a mock.
<h2>Conclusion</h2>
This is a very controversial post. On one hand, I describe how to use PowerMock and what features it has, on the other hand, I state that you'd better not use it. PowerMock is extremely powerful and can do almost anything you need in your testing, but for me, the necessity of using PowerMock is an indicator of bad code design.  <hr data-astro-cid-bvzihdzo>  <h2 data-astro-cid-bvzihdzo>Related Posts</h2> <ul data-astro-cid-bvzihdzo> <li data-astro-cid-bvzihdzo> <a href="/mock-junit-tests-mockito-example/" data-astro-cid-bvzihdzo>Mock JUnit tests with Mockito example</a> </li><li data-astro-cid-bvzihdzo> <a href="/mock-static-methods-junit-powermock-example/" data-astro-cid-bvzihdzo>Mock static methods in JUnit with PowerMock example</a> </li><li data-astro-cid-bvzihdzo> <a href="/verify-static-method-called-powermock/" data-astro-cid-bvzihdzo>Verify static method was called with PowerMock</a> </li><li data-astro-cid-bvzihdzo> <a href="/call-private-method-powermock/" data-astro-cid-bvzihdzo>Call private method with PowerMock</a> </li><li data-astro-cid-bvzihdzo> <a href="/mock-private-method-call-powermock/" data-astro-cid-bvzihdzo>Mock private method call with PowerMock</a> </li><li data-astro-cid-bvzihdzo> <a href="/mock-new-object-creation-powermock/" data-astro-cid-bvzihdzo>Mock new object creation with PowerMock</a> </li> </ul>  <div class="tags" data-astro-cid-bvzihdzo> <div data-astro-cid-bvzihdzo>Tags:</div> <a href="/tags/java" data-astro-cid-bvzihdzo>Java</a><a href="/tags/powermock" data-astro-cid-bvzihdzo>PowerMock</a><a href="/tags/unit-testing" data-astro-cid-bvzihdzo>Unit testing</a> </div> </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 - Automation Rhapsody. All rights reserved.
</footer>  </body></html>