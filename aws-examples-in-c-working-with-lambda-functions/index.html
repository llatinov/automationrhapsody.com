<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Automation Rhapsody" href="https://automationrhapsody.com/rss.xml"><meta name="generator" content="Astro v5.5.3"><!-- Font preloads --><!-- <link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin /> --><!-- <link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin /> --><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Playball"><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://automationrhapsody.com/aws-examples-in-c-working-with-lambda-functions/"><!-- Primary Meta Tags --><title>AWS examples in C# - working with Lambda functions</title><meta name="title" content="AWS examples in C# - working with Lambda functions"><meta name="description" content="Iintroduction to AWS Lambda functions."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://automationrhapsody.com/aws-examples-in-c-working-with-lambda-functions/"><meta property="og:title" content="AWS examples in C# - working with Lambda functions"><meta property="og:description" content="Iintroduction to AWS Lambda functions."><meta property="og:image" content="https://automationrhapsody.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://automationrhapsody.com/aws-examples-in-c-working-with-lambda-functions/"><meta property="twitter:title" content="AWS examples in C# - working with Lambda functions"><meta property="twitter:description" content="Iintroduction to AWS Lambda functions."><meta property="twitter:image" content="https://automationrhapsody.com/blog-placeholder-1.jpg"><style>:root{--color-gray-bg: #f5f5f5;--color-gray-text: #5e5e5e}body{font-family:Roboto,sans-serif;background:var(--color-gray-bg);word-wrap:break-word;overflow-wrap:break-word;color:var(--color-gray-text);font-size:18px}main{width:960px;max-width:calc(100% - 2em);margin:auto}h2{color:#3879d9;font-size:20px;margin:25px 0 6px}p{margin:6px 0}img{max-width:100%}@media (max-width: 720px){body{font-size:16px}ul{padding-inline-start:16px}}footer[data-astro-cid-sz7xmlte]{margin:24px 0;text-align:center}header[data-astro-cid-3ef6ksr2]{text-align:center;font-size:56px}header[data-astro-cid-3ef6ksr2] div[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{font-family:Playball,Arial;color:#000;text-decoration:none;text-shadow:0 .033em 0 #fff;border-bottom:none}
article[data-astro-cid-bvzihdzo]{padding:24px;box-shadow:0 2px 3px #acabab;background:#fff;position:relative}.post-title[data-astro-cid-bvzihdzo]{font-family:Bitter,serif;font-weight:700!important;margin:0;padding:5px 0;font-size:32px;line-height:40px;color:#444}@media (max-width: 720px){article[data-astro-cid-bvzihdzo]{padding:12px}}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Automation Rhapsody</a> </div> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2020-03-14T00:00:00.000Z"> Mar 14, 2020 </time> <div class="last-updated-on" data-astro-cid-bvzihdzo>
Last updated on <time datetime="2022-01-18T00:00:00.000Z"> Jan 18, 2022 </time> </div> </div> <h1 class="post-title" data-astro-cid-bvzihdzo>AWS examples in C# - working with Lambda functions</h1> <hr data-astro-cid-bvzihdzo> </div>  <p>This post is part of <a href="/aws-examples-in-c-working-with-sqs-dynamodb-lambda-ecs/">AWS examples in C# – working with SQS, DynamoDB, Lambda, ECS</a> series. The code used for this series of blog posts is located in <a href="https://github.com/llatinov/aws.examples.csharp" target="_blank" rel="noopener noreferrer">aws.examples.csharp</a> GitHub repository.</p>
<h2>AWS Lambda</h2>
AWS Lambda allows easy ramp-up of service without all the hassle to manage servers and environments. The ready code is uploaded to Lambda and automatically run. AWS Lambda automatically scales applications by running code in response to each trigger. The code runs in parallel and processes each trigger individually, scaling precisely with the size of the workload.
<h2>Main concepts</h2>
There are several terms that need to be briefly explained to get some understanding of what AWS Lambda offers.
<ul>
 	<li><em><strong>Function</strong></em> - A code written in a programming language, for supported runtime, that does some computational work.</li>
 	<li><em><strong>Runtime</strong></em> - Allow running of functions in different programming languages, supported languages are: Node.js, Python, Ruby, Java, Go, .NET.</li>
 	<li><em><strong>Event</strong></em> - A JSON formatted document that contains data for a function to process, which is converted to object by the runtime and passed to the function.</li>
 	<li><em><strong>Concurrency</strong></em> - The number of requests that your function is serving at any given time. If a function is invoked, meanwhile executing another task, then another instance is provisioned, increasing the function's concurrency.</li>
 	<li><em><strong>Trigger</strong></em> - A resource or configuration that invokes a Lambda function. This includes AWS services, applications, and event source mappings.</li>
 	<li><em><strong>Event source mapping</strong></em> - A resource in Lambda that reads items from a stream or queue and invokes a function.</li>
</ul>
<h2>AWS Lambda applications</h2>
Lambda is the actual name of serverless functions in AWS. Along with the lambda functions, AWS supports also a concept of an application, which is a combination of Lambda functions, event sources, and other resources that work together to perform tasks. AWS CloudFormation is used to collect application's components into a single package that can be deployed and managed as one resource. Applications make Lambda projects portable.
<h2>CloudFormation</h2>
AWS CloudFormation provides infrastructure as a code (IoC) capabilities. It defines a common language to model and provision AWS application resources. AWS resources and applications are described in YAML or JSON files, which are then provisioned by CloudFormation. This gives a single source of truth.
<h2>API Gateway</h2>
API Gateway is a fully managed service that makes it easy to create, publish, maintain, monitor, and secure APIs. APIs act as the "front door" for applications to access data, business logic, or functionality from backend services. It is very easy to create <em><strong>RESTful APIs</strong></em> and WebSocket APIs with API Gateway. It supports traffic management, CORS support, authorization, access control, throttling, monitoring, and API version management.
<h3>API Keys</h3>
API keys are the way to create usage plans, so APIs can be given to customers as a product offering with predefined request rates and quotas. A <em><strong>usage plan</strong></em> is created in AWS and it has a <em><strong>throttling limit</strong></em>, which is basically the request rate limit that is applied to each API key that you add to the usage plan. A <em><strong>quota</strong></em> is configured to the usage plan and applied to its API keys. This is the maximum number of requests with a given API key that can be submitted within a specified time interval. API keys can be provided to API Gateway in the <em><strong>X-API-Key</strong></em> header, this is what is shown in the current examples. Another way to work with API keys is with a lambda authorizer function, which returns the API key as part of the authorization response. API Keys can be created or imported from a file. Important is that API keys are not used to manage authentication and authorization.
<h3>Access control</h3>
Access control to a REST API in API Gateway can be done with several mechanisms:
<ul>
 	<li>Resource policies</li>
 	<li>Standard AWS IAM roles and policies</li>
 	<li>IAM tags can be used together with IAM policies to control access</li>
 	<li>Endpoint policies for interface VPC endpoints</li>
 	<li>Lambda authorizers</li>
 	<li>Amazon Cognito user pools</li>
</ul>
<h3>Lambda (custom) authorizers</h3>
In the examples given, lambda (formerly knows as custom) authorizer is used. API Gateway uses a dedicated Lambda function to do the authorization. More details on how to use authorizers can be found in <a href="/aws-examples-in-c-introduction-to-serverless-framework/">AWS examples in C# – introduction to Serverless framework</a> post.
<h2>CloudWatch</h2>
CloudWatch is a monitoring and observability service. CloudWatch collects monitoring and operational data in the form of logs, metrics, and events, providing a unified view of AWS resources, applications, and services. CloudWatch can be used to detect anomalous behavior, set alarms, visualize logs and metrics side by side, take automated actions, troubleshoot issues. By default, AWS Lambda is logging into CloudWatch. This makes it very easy to trace lambda function issues.
<h2>Design considerations</h2>
There are some specifics that have to be taken into consideration when using lambdas. One of the benefits of lambdas is to be cost-effective. Users can select what amount of RAM to set for the lambda function when it is created. This is done with <em><strong>--memory-size</strong></em> in <em><strong>aws lambda create-function</strong></em> command, see more in <em><strong>AWS examples in C# – deploy with AWS CLI commands</strong></em> post. The default value is 128MB and CPU is allocated proportionally. Sometimes defining too low memory can end up in unexpected performance issues. This should be monitored and optimized based on specific programming language and code. Lambdas are paid per <em><strong>100ms execution time</strong></em>, so this also should be taken into consideration when tweaking the memory setting. In terms of cost-effectiveness, it is more <em><strong>expensive</strong></em> to add more RAM in order to optimize from 100ms to 50ms execution time, because 100ms on the higher amount of RAM is being paid. It has to be analyzed how much it makes sense for the end-users. Also, another consideration is that API Gateway adds additional delay in total time for the request. CloudWatch logs cost money, so awareness is needed about how much data a lambda function is logging. More pitfalls with more details using lambdas can be found in <a href="https://medium.com/@emaildelivery/serverless-pitfalls-issues-you-may-encounter-running-a-start-up-on-aws-lambda-f242b404f41c" target="_blank" rel="noopener noreferrer">Serverless Pitfalls: Issues With Running a Startup on AWS Lambda</a> article.
<p>Still, the main consideration for lambda performance is so-called <em><strong>cold start</strong></em>. If the function has not been run for a while then it needs some time for the first request to go through. I’ve seen up to 4 seconds when experimenting, although I had not really measured it. Theoretically, there is an option to ping your API at a certain amount of time to keep it “warm”. In practice, for heavy loads, AWS runs parallel instances of the lambda, in order to handle the traffic, and each new instance will have a cold start.</p>
<h2>Create lambda</h2>
Practical examples of how to create AWS Lambda functions are available in the following posts:
<ul>
 	<li><a href="/aws-examples-in-c-create-basic-lambda-function/">AWS examples in C# – create basic Lambda function</a></li>
 	<li><a href="/aws-examples-in-c-introduction-to-serverless-framework/">AWS examples in C# – introduction to Serverless framework</a></li>
</ul>
<h2>Conclusion</h2>
AWS Lambda is a very convenient and easy way to create running applications with minimal overhead. There are certain design considerations such as lambda cold start that has to be taken into consideration when deciding on lambda usage.  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 - Automation Rhapsody. All rights reserved.
</footer>  </body></html>