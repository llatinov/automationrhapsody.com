<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Automation Rhapsody" href="https://automationrhapsody.com/rss.xml"><meta name="generator" content="Astro v5.5.3"><!-- Font preloads --><!-- <link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin /> --><!-- <link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin /> --><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Playball"><link rel="stylesheet" property="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://automationrhapsody.com/run-dropwizard-java-application-vagrant/"><!-- Primary Meta Tags --><title>Run Dropwizard Java application on Vagrant</title><meta name="title" content="Run Dropwizard Java application on Vagrant"><meta name="description" content="How to run Dropwizard or any other Java application on Vagrant."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://automationrhapsody.com/run-dropwizard-java-application-vagrant/"><meta property="og:title" content="Run Dropwizard Java application on Vagrant"><meta property="og:description" content="How to run Dropwizard or any other Java application on Vagrant."><meta property="og:image" content="https://automationrhapsody.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://automationrhapsody.com/run-dropwizard-java-application-vagrant/"><meta property="twitter:title" content="Run Dropwizard Java application on Vagrant"><meta property="twitter:description" content="How to run Dropwizard or any other Java application on Vagrant."><meta property="twitter:image" content="https://automationrhapsody.com/blog-placeholder-1.jpg"><style>:root{--color-gray-bg: #f5f5f5;--color-gray-text: #5e5e5e}body{font-family:Roboto,sans-serif;background:var(--color-gray-bg);word-wrap:break-word;overflow-wrap:break-word;color:var(--color-gray-text);font-size:18px}main{width:960px;max-width:calc(100% - 2em);margin:auto}h2{color:#3879d9;font-size:20px;margin:25px 0 6px}p{margin:6px 0}img{max-width:100%}@media (max-width: 720px){body{font-size:16px}ul{padding-inline-start:16px}}footer[data-astro-cid-sz7xmlte]{margin:24px 0;text-align:center}header[data-astro-cid-3ef6ksr2]{text-align:center;font-size:56px}header[data-astro-cid-3ef6ksr2] div[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{font-family:Playball,Arial;color:#000;text-decoration:none;text-shadow:0 .033em 0 #fff;border-bottom:none}
article[data-astro-cid-bvzihdzo]{padding:24px;box-shadow:0 2px 3px #acabab;background:#fff;position:relative}.post-title[data-astro-cid-bvzihdzo]{font-family:Bitter,serif;font-weight:700!important;margin:0;padding:5px 0;font-size:32px;line-height:40px;color:#444}@media (max-width: 720px){article[data-astro-cid-bvzihdzo]{padding:12px}}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Automation Rhapsody</a> </div> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2017-06-08T00:00:00.000Z"> Jun 8, 2017 </time> <div class="last-updated-on" data-astro-cid-bvzihdzo>
Last updated on <time datetime="2022-01-18T00:00:00.000Z"> Jan 18, 2022 </time> </div> </div> <h1 class="post-title" data-astro-cid-bvzihdzo>Run Dropwizard Java application on Vagrant</h1> <hr data-astro-cid-bvzihdzo> </div>  <p>The code below can be found in GitHub <a title="sample-dropwizard-rest-stub" href="https://github.com/llatinov/sample-dropwizard-rest-stub" target="_blank" rel="noopener noreferrer">sample-dropwizard-rest-stub</a> repository in <em><strong>Vagrantfile-jar</strong></em> file. Since Vagrant requires to have only one Vagrantfile if you want to run this example you have to rename <em><strong>Vagrantfile-jar</strong></em> to <em><strong>Vagrantfile</strong></em> then run Vagrant commands described at the end of this post. This post is part of Vagrant series. All of other Vagrant related posts, as well as more theoretical information what is Vagrant and why to use it, can be found in <a href="/what-is-vagrant-and-why-to-use-it/">What is Vagrant and why to use it</a> post.</p>
<h2>Vagrantfile</h2>
As described in Vagrant introduction post all configurations are done in a single text file called <em><strong>Vagrantfile</strong></em>. Below is a Vagrant file which can be used to deploy and start as service Dropwizard Java application described in <a href="/build-a-rest-stub-server-with-dropwizard/">Build a RESTful stub server with Dropwizard</a> post.
<pre class="language-text"><code>Vagrant.configure('2') do |config|

  config.vm.hostname = 'dropwizard'
  config.vm.box = 'opscode-centos-7.2'
  config.vm.box_url = 'http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-7.2_chef-provisionerless.box'

  config.vm.synced_folder './', '/vagrant'

  config.vm.network :forwarded_port, guest: 9000, host: 9000
  config.vm.network :forwarded_port, guest: 9001, host: 9001

  config.vm.provider :virtualbox do |vb|
    vb.name = 'dropwizard-rest-stub-jar'
  end

  config.vm.provision :shell do |shell|
    shell.inline = &#x3C;&#x3C;-SHELL
      sudo service dropwizard stop
      sudo yum -y install java
      sudo mkdir -p /var/dropwizard-rest-stub
      sudo mkdir -p /var/dropwizard-rest-stub/logs
      sudo cp /vagrant/target/sample-dropwizard-rest-stub-1.0-SNAPSHOT.jar /var/dropwizard-rest-stub/dropwizard-rest-stub.jar
      sudo cp /vagrant/config-vagrant.yml /var/dropwizard-rest-stub/config.yml
      sudo cp /vagrant/linux_service_file /etc/init.d/dropwizard
      # Replace CR+LF with LF because of Windows
      sudo sed -i -e 's/\r//g' /etc/init.d/dropwizard
      sudo chmod +x /etc/init.d/dropwizard
      sudo service dropwizard start
    SHELL
  end

end
</code></pre>
<h2>Vagrantfile explanation</h2>
The file starts with a <em><strong>Vagrant.configure('2') do |config|</strong></em> which states that version <em><strong>2</strong></em> of Vagrant API will be used and defines constant with name <strong>config</strong> to be used below. Guest operating system hostname is set to <em><strong>config.vm.hostname</strong></em>. If you use <a href="https://github.com/cogitatio/vagrant-hostsupdater" target="_blank" rel="noopener noreferrer">vagrant-hostsupdater</a> plugin it will add it to your hosts file and you can access it from a browser in case you are developing web applications. With <em><strong>config.vm.box</strong></em> you define which would be the guest operating system. Vagrant maintains <em><strong>config.vm.box = "hashicorp/precise64"</strong></em> which is Ubuntu 12.04 (32 and 64-bit), they also recommend to use <a href="https://app.vagrantup.com/bento" target="_blank" rel="noopener noreferrer">Bento's boxes</a>. I have found issues with Vagrant's as well as Bento's boxes so I've decided to use one I know is working. I specify where it is located with <em><strong>config.vm.box_url</strong></em>. It is <a href="https://www.centos.org/" target="_blank" rel="noopener noreferrer">CentOS</a> 7.2. With <em><strong>config.vm.synced_folder</strong></em> command, you specify that Vagrantfile location folder is shared as <em><strong>/vagrant/</strong></em> in the guest operating system. This makes it easy to transfer files between guest and host operating systems. This mount is done by default, but it is good to explicitly state it for better readability. With <em><strong>config.vm.network :forwarded_port</strong></em> port from guest OS is forwarded to your hosting OS. Without exposing any port you will not have access to guest OS, only port open by default is 22 for SSH. With <em><strong>config.vm.provider :virtualbox do |vb|</strong></em> you access <em><strong>VirtualBox</strong></em> provider for more configurations, <em><strong>vb.name = 'dropwizard-rest-stub-jar'</strong></em> sets the name that you see in Oracle VirtualBox Manager. Finally, the deployment part takes place which is done by shell commands inside <em><strong>config.vm.provision :shell do |shell|</strong></em> block. Service <em><strong>dropwizard</strong></em> is stopped, if does not exist an error is shown, but it does not interrupt provisioning process. Command <em><strong>yum -y install java</strong></em> is CentOS specific and it installs Java by <em><strong>YUM</strong></em> which is CentOS package manager. For other Linux distributions, you have to use a command with their package manager. Folders are created, then JAR and YML files are copied to the machine. Notice that files are copied from <em><strong>/vagrant/</strong></em> folder, this is actually the shared folder to your host OS. Installing Java application as service is done by copying <em><strong>linux_service_file</strong></em> to <em><strong>/etc/init.d/dropwizard</strong></em>. This creates service with name <em><strong>dropwizard</strong></em>. See more how to install Linux service in <a href="/install-java-application-linux-service/">Install Java application as a Linux service</a> post. Since I'm on Windows its line endings (CR+LF) is different than on Linux (LF) and service is not working, giving <em><strong>env: /etc/init.d/dropwizard: No such file or directory</strong></em> error. This is why CF+LF should be replaced with LF with <em><strong>sudo sed -i -e 's/\r//g' /etc/init.d/dropwizard</strong></em> command. Script has to be made executable with <em><strong>sudo chmod +x /etc/init.d/dropwizard</strong></em>. Finally, the script starts the <em><strong>dropwizard</strong></em> service. The nicer way to do this is all installation steps to be extracted as separate batch file and in Vagrantfile just to call that file. I've put it in Vagrantfile just to have it in one place.
<h2>Running Vagrant</h2>
Command to start Vagrant machine is: <em><strong>vagrant up</strong></em>. Then in order to invoke provisioning section with actual deployment, you have to call: <em><strong>vagrant provision</strong></em>. All can be done in one step: <em><strong>vagrant up --provision</strong></em>. To shut down the machine use <em><strong>vagrant halt</strong></em>. To delete machine: <em><strong>vagrant destroy</strong></em>.
<h2>Conclusion</h2>
It is very easy to create Vagrantfile that install Java application. Once created file can be reused by all team members. It is executed over and over again making provisioning extremely easy.  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 - Automation Rhapsody. All rights reserved.
</footer>  </body></html>